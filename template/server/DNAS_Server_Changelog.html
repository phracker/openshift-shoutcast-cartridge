<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" dir="ltr" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>SHOUTcast DNAS Server Changelog</title>
<style type="text/css">body,table,textarea,pre{font-family:Arial,Helvetica,sans-serif;font-size:10pt;}.header{background-color:rgb(66,164,189);color:white;padding:1px;}a:link,a:visited{color:#2762AE;text-decoration:none;}a:hover{text-decoration:underline;}ul{list-style-type:none;text-align:left;}ul.n{list-style-type:square;text-align:left;}pre{background-color:#F0F0F0;border:1px solid #CCCCCC;font-weight:bold;padding:5px 10px 5px 10px;display:inline-block;margin-top:0;margin-bottom:0;margin-left:25px;}pre.src{border:0;font-family:monospace;background-color:white;}span.b{font-weight:normal;color:#3366CC;}span.c{font-style:italic;font-weight:normal;color:#808080;}span.v{font-weight:normal;}span.r{font-weight:normal;color:#000066;}span.s{font-weight:normal;color:#FF0000;}#toc{border:1px solid #CCCCCC;padding:0 5px 0 5px;text-align: center;}p.ver{font-size:85%;margin-top:-1.5em;text-align:center;}.thumb{float:right;clear:both;margin-left:10px;margin-top:5px;margin-bottom:10px;width:202px;}.serv{float:right;clear:both;margin-left:10px;margin-top:5px;margin-bottom:10px;width:252px;}.pages{white-space:nowrap;padding-right:25px;}img{width:200px;}img.serv{width:250px;}img.thumb{border:1px solid #CCCCCC;}hr{border:0;background-color:#CCCCCC;height:1px;)</style>
<script type="text/javascript">if(window.showTocToggle){var tocShowText="show";var tocHideText="hide";showTocToggle()}function showTocToggle(){if(document.createTextNode){var linkHolder=document.getElementById('toctitle');if(!linkHolder){return}var outerSpan=document.createElement('span');outerSpan.className='toctoggle';var toggleLink=document.createElement('a');toggleLink.id='togglelink';toggleLink.className='internal';toggleLink.href='javascript:toggleToc()';toggleLink.appendChild(document.createTextNode(tocHideText));outerSpan.appendChild(document.createTextNode('['));outerSpan.appendChild(toggleLink);outerSpan.appendChild(document.createTextNode(']'));linkHolder.appendChild(document.createTextNode(' '));linkHolder.appendChild(outerSpan);var cookiePos=document.cookie.indexOf("slog_hidetoc=");if(cookiePos>-1&&document.cookie.charAt(cookiePos+13)==1){toggleToc()}}}function changeText(el,newText){if(el.innerText){el.innerText=newText}else if(el.firstChild&&el.firstChild.nodeValue){el.firstChild.nodeValue=newText}}function toggleToc(){var toc=document.getElementById('toc').getElementsByTagName('ul')[0];var first=document.getElementById('first');var toggleLink=document.getElementById('togglelink');if(toc&&toggleLink&&toc.style.display=='none'){changeText(toggleLink,tocHideText);document.getElementById('toc').style.cssFloat='left';toc.style.display='block';first.style.marginLeft='180px';document.cookie="slog_hidetoc=0"}else{changeText(toggleLink,tocShowText);document.getElementById('toc').style.cssFloat='';toc.style.display='none';first.style.marginLeft='';document.cookie="slog_hidetoc=1"}}window.onload=function(){var cookiePos=document.cookie.indexOf("slog_hidetoc=");if(cookiePos>-1&&document.cookie.charAt(cookiePos+13)==1){toggleToc()}}</script>
</head>
<div class="header">
<h1 align="center">SHOUTcast DNAS Server Changelog</h1>
<p class="ver">(Last Updated 28 Jan 2017)</p>
</div>
<table id="toc" style="float:left;margin-right:40px;margin-bottom:5px;"><tbody><tr><td>
<div id="toctitle"><b>Contents</b> <span class="toctoggle">[<a id="togglelink" class="internal" href="javascript:toggleToc()">hide</a>]</span></div>
<ul style="padding-left:0px;">
<li><a href="#723">2.5.1 Build 724</a></li>
<li><a href="#700">2.4.8 Build 700</a></li>
<li><a href="#256">2.4.7 Build 256</a></li>
<li><a href="#167">2.4.2 Build 167 / 168</a></li>
<li><a href="#165">2.4.1 Build 164 / 165</a></li>
<li><a href="#147">2.4.0 Build 147</a></li>
<li><a href="#123">2.2.2 Build 123</a></li>
<li><a href="#109">2.2.1 Build 109</a></li>
<li><a href="#107">2.2.0 Build 107</a></li>
<li><a href="#29">2.0.0 Build 29</a></li>
<li><a href="#28">2.0.0 Build 28 (RC 2)</a></li>
<li><a href="#27">2.0.0 Build 27 (RC 1)</a></li>
<li><a href="#19">2.0.0 Build 19 (Beta)</a></li>
<li><a href="#18">2.0.0 Build 18 (Beta)</a></li>
<li><a href="#17">2.0.0 Build 17 (Beta)</a></li>
<li><a href="#14">2.0.0 Build 14 (Beta)</a></li>
<li><a href="#13">2.0.0 Build 13 (Beta)</a></li>
<li><a href="#10">2.0.0 Build 10 (Beta)</a></li>
<li><a href="#7">2.0.0 Build 7 (Beta)</a></li>
</ul>
</td></tr></tbody></table>

<a name="724"></a><h3>2.5.1 Build 724</h3>
<hr>
<ul class="n" id="first" style="margin-left:180px;">
<li>Fix libcurl i686 32bit lib build (ssl was broken)
<li>Avoid forced icy metadata for Roku and WMP
<li>Purge adverts not used in some time, frees up memory for re-use
<li>Adjust automatic cpu scaler
<li>Drop to HTTP/1.0 in most responses
<li>Use correct IP for stats engine, xml stats were wrong for XFF
<li>Improve buffer handling
<li>Dropping pragma/expires header
</ul>
<h3>2.5.1 Build 723</h3>
<hr>
<ul class="n" id="first" style="margin-left:180px;">
<li>Added FLV containerisation support for MP3 and AAC streams (add ?type=.flv to compatible stream urls to use)</li>
<li>Added support for sending title updates to Tunein for DNAS+ streams</li>
<li>Added 'minbitrate' and 'streamminbitrate' options to complement the 'maxbitrate' and 'streammaxbitrate' options</li>
<li>Added 'streambitrate' alias for setting both 'streammaxbitrate' and 'streamminbitrate' to enforce a single allowed bitrate</li>
<li>Added the HTML5 player to /index.html?sid=0 page for all compatible streams (currently only MP3 streams)</li>
<li>Added 'type=x' parameter to force specific connection handling (e.g. type=http or type=.flv or type=sc1 or type=sc2 or type=html) irrespective of what the connection may indicate from header and user-agent values)</li>
<li>Added unlimited listener support when setting 'maxuser=0' to allow any listener connection (the server will still need to be able to support the number of requests when this is enabled to avoid streaming issues)</li>
<li>Added frame syncing support on all source inputs (direct and relay) to filter out bad stream data</li>
<li>Added 'dns' mappings of the 'ip' config options (e.g. publicdns -> publicip)</li>
<li>Added modes to enable / disable only the source and only the listener debugging options via mode=debug?option=source and mode=debug?option=listener respectively</li>
<li>Added StreamNext='xxx' to the SHOUTcast 1.x-style in-stream title updates (will need listener software updates to be able to make use of this)</li>
<li>Added samplerate reporting on the appropriate stream pages and log output</li>
<li>Added rate limiting on all listener handlers to help reduce listeners getting too far ahead or adverts being resumed from at the in-correct position (or playing the filler as well as the adverts)</li>
<li>Added 'ratelimit' to enable control of the frame rate limiting feature (set ratelimit=0 to disable if it causes issues)</li>
<li>Added 'adtestfile', 'adtestfileloop', 'streamadtestfile', 'streamadtestfileloop', and related handling to aid in testing advert triggers will work (see documentation for details)</li>
<li>Added 'adminfile' support which allows for restricting unwanted access to admin.cgi to only valid IP / hostnames added intto the 'sc_serv.admin' file (see documentation for details)</li>
<li>Added 'forceshortsends' support which allows for mimicking restricted network output which can occassionally be helpful for debugging</li>
<li>Added 'adminnowrap' support to allow for disabling some of the mobile friendly CSS / HTML changes for the stream admin page and its display of the listener list</li>
<li>Added a sanitised configuration settings view mode for the server administrator to aid in checking that the DNAS is using the settings it is meant to be using</li>
<li>Added /currentmetadata?sid=# which is a more accessible version of the admin.cgi mode=viewxml or mode=viewjson and page=5 requests for getting the extended stream metadata</li>
<li>Added support to make better use of the X-Forwarded-For HTTP header (use usexff=0 to disable this change) which is helpful if all listeners appear to be connected from the local machine due to front-facing services</li>
<li>Added proper handling of HTTP HEAD requests to resolve a number of issues with unexpected listener connections and failed source connections</li>
<li>Added a 'kick duplicates' option to the stream administrator page to make it easier to kick duplicate connections from the same user agent and address (see documentation for how to use this in a script)</li>
<li>Added support for direct HTTP sources (e.g. Icecast based sources) to be accepted when providing MP3 and AAC based stream content)</li>
<li>Added support for SHOUTcast 1.x sources to be accepted on 'portbase' and not 'portbase+1' as per the SHOUTcast 1.x protocol specification which makes it possible for all sources (1.x and 2.x) to be accepted on a single port instead of needing two ports (see documentation for details and limitations of this mode)<br><br></li>

<li>Changed authhash management to improve integration with the Radionomy platform and services now being offered for SHOUTcast broadcasters</li>
<li>Changed the default CSS / HTML output to adjustements to work better on mobile devices / small screens including consolidating and removing some of the information on the summary pages</li>
<li>Changed the YP update to be able to do a full re-add of the stream on update incase of YP-side issues on add</li>
<li>Changed the YP update handling to be more dynamic to aid with remote clustering fixes</li>
<li>Changed to use a new scheduler which allows the server to be more flexible and allows the rate limiting support to work correctly</li>
<li>Changed to require a key press if running normally (non-daemon and non-service modes) when a major issue occurs of the server cannot be run</li>
<li>Changed 1.x source handling to check the password earlier in the connection steps which allows for quicker checking and setup of the source or rejection as applicable</li>
<li>Changed the the existing playing and admin metadata responses to include extended metadata (if available)</li>
<li>Changed the tailing mode to match the 1.x DNAS so it will now only show the log output from when opening the tailing view</li>
<li>Changed title update to clarify why certain title updates are being rejected</li>
<li>Changed the way that advert triggers are detected and processed to increase the reliability of advert triggers being actioned</li>
<li>Changed some of the page icons to appear more visible on dark backgrounds</li>
<li>Changed log output to only show 'Terminating listeners...' if there are listeners</li>
<li>Changed some more internal data sctructures to provide additional memory reductions on per-listener basis</li>
<li>Changed applicable timeout handling to go through a common handler which now ensures that per-stream overrides on the timeouts are correctly applied</li>
<li>Changed to indicate CDN mode on backup relay connections</li>
<li>Changed the internal handling of the config items to better handle large stream ids so as to save memory if not using sequential streamids (which speeds up config handling as well as potentially saving a lot of memory)</li>
<li>Changed to check and abort starting the DNAS if no source passwords are specified</li>
<li>Changed some of the log start-up wording messages</li>
<li>Changed the Flash Policy Server to generate the response immediately to reduce time to provide a response</li>
<li>Changed to not check for &lt;policy-file-request/&gt; if the Flash Policy Server is not enabled on the port</li>
<li>Changed the HTTP handler to reduce the time to process requests when first processing the request</li>
<li>Changed to show the bitrate of the skipped files to help with diagnosing why a file was skipped</li>
<li>Changed handling of relay and direct 1.x sources to improve consistency between them and reduce the time to start a relay connection</li>
<li>Changed the 2.x relay handling to reduce time to setup the relay connection as well as reducing memory for the connection setup</li>
<li>Changed file / advert checking to also check the samplerate to improve reliabity of file / advert inserts</li>
<li>Changed the stream login / logout options to have 'Stream' in front of them to make it clearer vs the main Server actions</li>
<li>Changed to look for SSLv2 / SSLv3 / TLSv1.x connections and abort them as we do not support HTTPS connections and this was causing false source connection attempts</li>
<li>Changed debugging output to make it easier to see the full filepath of the control files being used</li>
<li>Changed when the YP 'add' is issued to prevent it spamming the metrics system if the connnection quickly fails (e.g. when running a relay that cannot connect to the source)</li>
<li>Changed SHOUTcast 1.x and HTTP listener connection handling to be done separately which allows us to provide an optimised HTTP experience than the prior shared handling</li>
<li>Changed the debugging options admin page to make it easier to enable groups of options and find other related usage changes</li>
<li>Changed the help / documentation links to use a more complete page which better details information</li>
<li>Changed the Windows version to make use of a modified pthread-win32 to make internal handling more consistent between OS platforms</li>
<li>Changed the 'kick all' button to span across all of 'kick' actions and to respond to clicks anywhere in the element</li>
<li>Changed the advert status to now be in it's own column instead of being in the 'connected duration' column</li>
<li>Changed the 'sources' page to show the direct stream urls of the configured streams</li>
<li>Changed error message output to be more consistent between the platform versions</li>
<li>Changed Windows Vista+ usage to better scale for larger listener numbers compared to using the Windows XP and prior mode</li>
<li>Changed the listener duration output to be a more condensed version (more like the 1.x DNAS which is better for mobile)</li>
<li>Changed the ultravox creation to reduce the processing overhead when creating such data</li>
<li>Changed admin.cgi?mode=history to provide XML and JSON responses like the /played(.html) method can provide</li>
<li>Changed to ignore empty icy-icq, icy-irc and icy-aim headers which some older sources send and which could cause the source to be incorrectly rejected</li>
<li>Changed to allow empty icy-url headers to improve legacy source connection support</li>
<li>Changed the stream admin page to load the current listener list asynchronously instead of waiting for all of the details to load at once</li>
<li>Changed the HTML5 player on the DNAS pages to force http mode</li>
<li>Changed the HTML5 player on the DNAS pages to be hidden if the browser being used does not support such playback of the stream(s)</li>
<li>Changed to use HTTPS for all communication the DNAS needs to make</li>
<li>Changed to show the user agent in the banned connection log messages</li>
<li>Changed to not save 'streamid' when re-writing or editing the config file as the DNAS is able to work this out without needing the option to be present (unlike with older 2.x releases)</li>
<li>Changed to about direct source connections earlier on if the source password is incorrect than was previously being done<br><br></li>

<li>Fixed handling of XML title updates with escaped characters leading to unexpected title update failures</li>
<li>Fixed issues with excessive CPU usage due to connections to the DNAS not having enough data ready to be provided or received</li>
<li>Fixed unexpected CPU usage when under low or no listener load (most noticeable on resource limited setups)</li>
<li>Fixed all reproducible memory and object leaks (mainly against the advert implementation)</li>
<li>Fixed the wrong streampath being used if the streampath config option is set but is left empty</li>
<li>Fixed streampath generation for the HTML5 player on the DNAS pages and for any listener / playlist requests (to improve listener / player compatibility)</li>
<li>Fixed Roku playback issues (affects 2.4.x)</li>
<li>Fixed Winamp 5.6+ playback issues (affects 2.4.7)</li>
<li>Fixed peaklisteners not being shown when there are no active listeners on the server admin page</li>
<li>Fixed metrics handling issues which were causing corrupted reponses to be sent (breaking account statistics)</li>
<li>Fixed advert updates being re-tried too often and not following the server side update interval</li>
<li>Fixed advert update pulls failing randomly after the first pull attempt</li>
<li>Fixed advert group not being updated in all cases for the existing listeners</li>
<li>Fixed advert groups not being displayed on the admin page in all situations</li>
<li>Fixed no message being shown on the advert groups if there are no known advert groups (affects 2.4.7)</li>
<li>Fixed adverts for SHOUTcast 1.x listeners not always firing if no data could be sent</li>
<li>Fixed lock-up for SHOUTcast 1.x listener when providing adverts and a title update needs to be sent</li>
<li>Fixed invalid HTTP requests attempting to be handled as a source connection</li>
<li>Fixed advert groups not being updated on the admin page unless some internal checks had been made</li>
<li>Fixed issue with the updater repeatedly re-downloading the update (2.4.3 / 2.4.7 beta issue)</li>
<li>Fixed /admin.cgi?mode=viewxml and /admin.cgi?mode=viewjson requests without a page parameter not being allowed for requests using the stream source password (resolves a 1.x DNAS compatibility issue)</li>
<li>Fixed configuration file writing not saving correctly with non-sequential stream configurations</li>
<li>Fixed default 'pidfile' generation not creating the file in the correct directory when run as a daemon (affects 2.4.x)</li>
<li>Fixed some debug messages from showing when they should not appear in non-debug mode</li>
<li>Fixed passwords containing the # character being incorrectly rejected due to the multi-1.x source support (affects 2.4.7)</li>
<li>Fixed the edit config handler not being able to create the backup config file on Windows (affects 2.4.x)</li>
<li>Fixed the receive and send buffers not being correctly limited in all cases to help prevent overflow issues</li>
<li>Fixed some of the supporting resource methods not providing compressed version of the resource as needed</li>
<li>Fixed ID3v1.x tags not being correctly stripped from intro / backup / adtest files</li>
<li>Fixed streampath allowing /listen to be used which would cause failed stream playback as a playlist would be provided instead of the stream (due to /listen being a reserved url</li>
<li>Fixed the YP connection tester causing listener add metrics requests to be sent</li>
<li>Fixed a number of scenarios where aborting a pending source relay connection would not terminate correctly</li>
<li>Fixed some path resolution issues where accented characters are in the file path</li>
<li>Fixed listeners already connected to a stream before it has obtained information from the YP not being reported to the metrics system and not being applied to advert groups if applicable</li>
<li>Fixed admincssfile not being re-loaded correctly on configuarion file reload</li>
<li>Fixed random crash on accessing the log view</li>
<li>Fixed random crash on closing when trying to write a log message and the logger has already been stopped</li>
<li>Fixed error reporting if there is an issue with configuration file backup and edit actions</li>
<li>Fixed HTTPS urls not being processed correctly causing broken urls on some of the server pages</li>
<li>Fixed handling of 1.x sources and relays which do not provide bitrate information so it is now determined from the stream audio data as needed</li>
<li>Fixed url reported when doing a YP url change not being correctly updated</li>
<li>Fixed advert triggers not always working Ultravox and manual XML title updates</li>
<li>Fixed AAC kbps calculations not being correct in some situations</li>
<li>Fixed a number of streaming related issues if 'short sends' are occurring (which primarily could lead to skips and data loss)</li>
<li>Fixed SHOUTcast 2.x sources reporting their received bandwidth total against SHOUTcast 2.x relays</li>
<li>Fixed some issues with the user agent management page</li>
<li>Fixed trying to ban listeners by user agent with an empty user agents not being handled correctly</li>
<li>Fixed 'http://' being incorrectly added onto some of the 1.x style 'StreamUrl' metadata values</li>
<li>Fixed a number of title update verification issues which were causing title corruption with extended character titles (affects 2.4.x)</li>
<li>Fixed the configuration file re-write option not working correctly in some scenarios</li>
<li>Fixed reported random locking issues being seen on some setups causing the DNAS to appear like it has crashed but is still running and just in a locked state<br><br></li>

<li>Updated the streampath filtering</li>
<li>Updated title filtering mappings</li>
<li>Updated to the latest cacert.pem</li>
<li>Updated to libcurl 7.49.1</li>
<li>Updated to OpenSSL 1.0.2h<br><br></li>

<li>Other code cleanup, minor bug fixes, re-ordering common cases to be checked first, processing reductions, page cleanups and anything else to improve stability, useability and responsiveness of the DNAS server</li>
<li>A plethora of monetization-related, stability and other general fixes</li>
</ul>

<a name="700"></a><h3>2.4.8 Build 700</h3>
<hr>
<ul class="n">
<li>Added FLV containerisation support for MP3 and AAC streams (add ?type=.flv to compatible stream urls to use)</li>
<li>Added support for sending title updates to Tunein for DNAS+ streams</li>
<li>Added 'minbitrate' and 'streamminbitrate' options to complement the 'maxbitrate' and 'streammaxbitrate' options</li>
<li>Added 'streambitrate' alias for setting both 'streammaxbitrate' and 'streamminbitrate' to enforce a single allowed bitrate</li>
<li>Added the HTML5 player to /index.html?sid=0 page for all compatible streams (currently only MP3 streams)</li>
<li>Added 'type=x' parameter to force specific connection handling (e.g. type=http or type=.flv or type=sc1 or type=sc2 or type=html) irrespective of what the connection may indicate from header and user-agent values)</li>
<li>Added unlimited listener support when setting 'maxuser=0' to allow any listener connection (the server will still need to be able to support the number of requests when this is enabled to avoid streaming issues)</li>
<li>Added frame syncing support on all source inputs (direct and relay) to filter out bad stream data</li>
<li>Added 'dns' mappings of the 'ip' config options (e.g. publicdns -> publicip)</li>
<li>Added modes to enable / disable only the source and only the listener debugging options via mode=debug?option=source and mode=debug?option=listener respectively</li>
<li>Added StreamNext='xxx' to the SHOUTcast 1.x-style in-stream title updates (will need listener software updates to be able to make use of this)</li>
<li>Added samplerate reporting on the appropriate stream pages and log output</li>
<li>Added rate limiting on all listener handlers to help reduce listeners getting too far ahead or adverts being resumed from at the in-correct position (or playing the filler as well as the adverts)</li>
<li>Added 'ratelimit' to enable control of the frame rate limiting feature (set ratelimit=0 to disable if it causes issues)</li>
<li>Added 'adtestfile', 'adtestfileloop', 'streamadtestfile', 'streamadtestfileloop', and related handling to aid in testing advert triggers will work (see documentation for details)</li>
<li>Added 'adminfile' support which allows for restricting unwanted access to admin.cgi to only valid IP / hostnames added intto the 'sc_serv.admin' file (see documentation for details)</li>
<li>Added 'forceshortsends' support which allows for mimicking restricted network output which can occassionally be helpful for debugging</li>
<li>Added 'adminnowrap' support to allow for disabling some of the mobile friendly CSS / HTML changes for the stream admin page and its display of the listener list</li>
<li>Added a sanitised configuration settings view mode for the server administrator to aid in checking that the DNAS is using the settings it is meant to be using</li>
<li>Added /currentmetadata?sid=# which is a more accessible version of the admin.cgi mode=viewxml or mode=viewjson and page=5 requests for getting the extended stream metadata</li>
<li>Added support to make better use of the X-Forwarded-For HTTP header (use usexff=0 to disable this change) which is helpful if all listeners appear to be connected from the local machine due to front-facing services</li>
<li>Added proper handling of HTTP HEAD requests to resolve a number of issues with unexpected listener connections and failed source connections</li>
<li>Added a 'kick duplicates' option to the stream administrator page to make it easier to kick duplicate connections from the same user agent and address (see documentation for how to use this in a script)</li>
<li>Added support for direct HTTP sources (e.g. Icecast based sources) to be accepted when providing MP3 and AAC based stream content)</li>
<li>Added support for SHOUTcast 1.x sources to be accepted on 'portbase' and not 'portbase+1' as per the SHOUTcast 1.x protocol specification which makes it possible for all sources (1.x and 2.x) to be accepted on a single port instead of needing two ports (see documentation for details and limitations of this mode)<br><br></li>

<li>Changed authhash management to improve integration with the Radionomy platform and services now being offered for SHOUTcast broadcasters</li>
<li>Changed the default CSS / HTML output to adjustements to work better on mobile devices / small screens including consolidating and removing some of the information on the summary pages</li>
<li>Changed the YP update to be able to do a full re-add of the stream on update incase of YP-side issues on add</li>
<li>Changed the YP update handling to be more dynamic to aid with remote clustering fixes</li>
<li>Changed to use a new scheduler which allows the server to be more flexible and allows the rate limiting support to work correctly</li>
<li>Changed to require a key press if running normally (non-daemon and non-service modes) when a major issue occurs of the server cannot be run</li>
<li>Changed 1.x source handling to check the password earlier in the connection steps which allows for quicker checking and setup of the source or rejection as applicable</li>
<li>Changed the the existing playing and admin metadata responses to include extended metadata (if available)</li>
<li>Changed the tailing mode to match the 1.x DNAS so it will now only show the log output from when opening the tailing view</li>
<li>Changed title update to clarify why certain title updates are being rejected</li>
<li>Changed the way that advert triggers are detected and processed to increase the reliability of advert triggers being actioned</li>
<li>Changed some of the page icons to appear more visible on dark backgrounds</li>
<li>Changed log output to only show 'Terminating listeners...' if there are listeners</li>
<li>Changed some more internal data sctructures to provide additional memory reductions on per-listener basis</li>
<li>Changed applicable timeout handling to go through a common handler which now ensures that per-stream overrides on the timeouts are correctly applied</li>
<li>Changed to indicate CDN mode on backup relay connections</li>
<li>Changed the internal handling of the config items to better handle large stream ids so as to save memory if not using sequential streamids (which speeds up config handling as well as potentially saving a lot of memory)</li>
<li>Changed to check and abort starting the DNAS if no source passwords are specified</li>
<li>Changed some of the log start-up wording messages</li>
<li>Changed the Flash Policy Server to generate the response immediately to reduce time to provide a response</li>
<li>Changed to not check for &lt;policy-file-request/&gt; if the Flash Policy Server is not enabled on the port</li>
<li>Changed the HTTP handler to reduce the time to process requests when first processing the request</li>
<li>Changed to show the bitrate of the skipped files to help with diagnosing why a file was skipped</li>
<li>Changed handling of relay and direct 1.x sources to improve consistency between them and reduce the time to start a relay connection</li>
<li>Changed the 2.x relay handling to reduce time to setup the relay connection as well as reducing memory for the connection setup</li>
<li>Changed file / advert checking to also check the samplerate to improve reliabity of file / advert inserts</li>
<li>Changed the stream login / logout options to have 'Stream' in front of them to make it clearer vs the main Server actions</li>
<li>Changed to look for SSLv2 / SSLv3 / TLSv1.x connections and abort them as we do not support HTTPS connections and this was causing false source connection attempts</li>
<li>Changed debugging output to make it easier to see the full filepath of the control files being used</li>
<li>Changed when the YP 'add' is issued to prevent it spamming the metrics system if the connnection quickly fails (e.g. when running a relay that cannot connect to the source)</li>
<li>Changed SHOUTcast 1.x and HTTP listener connection handling to be done separately which allows us to provide an optimised HTTP experience than the prior shared handling</li>
<li>Changed the debugging options admin page to make it easier to enable groups of options and find other related usage changes</li>
<li>Changed the help / documentation links to use a more complete page which better details information</li>
<li>Changed the Windows version to make use of a modified pthread-win32 to make internal handling more consistent between OS platforms</li>
<li>Changed the 'kick all' button to span across all of 'kick' actions and to respond to clicks anywhere in the element</li>
<li>Changed the advert status to now be in it's own column instead of being in the 'connected duration' column</li>
<li>Changed the 'sources' page to show the direct stream urls of the configured streams</li>
<li>Changed error message output to be more consistent between the platform versions</li>
<li>Changed Windows Vista+ usage to better scale for larger listener numbers compared to using the Windows XP and prior mode</li>
<li>Changed the listener duration output to be a more condensed version (more like the 1.x DNAS which is better for mobile)</li>
<li>Changed the ultravox creation to reduce the processing overhead when creating such data</li>
<li>Changed admin.cgi?mode=history to provide XML and JSON responses like the /played(.html) method can provide</li>
<li>Changed to ignore empty icy-icq, icy-irc and icy-aim headers which some older sources send and which could cause the source to be incorrectly rejected</li>
<li>Changed to allow empty icy-url headers to improve legacy source connection support</li>
<li>Changed the stream admin page to load the current listener list asynchronously instead of waiting for all of the details to load at once</li>
<li>Changed the HTML5 player on the DNAS pages to force http mode</li>
<li>Changed the HTML5 player on the DNAS pages to be hidden if the browser being used does not support such playback of the stream(s)</li>
<li>Changed to use HTTPS for all communication the DNAS needs to make</li>
<li>Changed to show the user agent in the banned connection log messages</li>
<li>Changed to not save 'streamid' when re-writing or editing the config file as the DNAS is able to work this out without needing the option to be present (unlike with older 2.x releases)</li>
<li>Changed to about direct source connections earlier on if the source password is incorrect than was previously being done<br><br></li>

<li>Fixed handling of XML title updates with escaped characters leading to unexpected title update failures</li>
<li>Fixed issues with excessive CPU usage due to connections to the DNAS not having enough data ready to be provided or received</li>
<li>Fixed unexpected CPU usage when under low or no listener load (most noticeable on resource limited setups)</li>
<li>Fixed all reproducible memory and object leaks (mainly against the advert implementation)</li>
<li>Fixed the wrong streampath being used if the streampath config option is set but is left empty</li>
<li>Fixed streampath generation for the HTML5 player on the DNAS pages and for any listener / playlist requests (to improve listener / player compatibility)</li>
<li>Fixed Roku playback issues (affects 2.4.x)</li>
<li>Fixed Winamp 5.6+ playback issues (affects 2.4.7)</li>
<li>Fixed peaklisteners not being shown when there are no active listeners on the server admin page</li>
<li>Fixed metrics handling issues which were causing corrupted reponses to be sent (breaking account statistics)</li>
<li>Fixed advert updates being re-tried too often and not following the server side update interval</li>
<li>Fixed advert update pulls failing randomly after the first pull attempt</li>
<li>Fixed advert group not being updated in all cases for the existing listeners</li>
<li>Fixed advert groups not being displayed on the admin page in all situations</li>
<li>Fixed no message being shown on the advert groups if there are no known advert groups (affects 2.4.7)</li>
<li>Fixed adverts for SHOUTcast 1.x listeners not always firing if no data could be sent</li>
<li>Fixed lock-up for SHOUTcast 1.x listener when providing adverts and a title update needs to be sent</li>
<li>Fixed invalid HTTP requests attempting to be handled as a source connection</li>
<li>Fixed advert groups not being updated on the admin page unless some internal checks had been made</li>
<li>Fixed issue with the updater repeatedly re-downloading the update (2.4.3 / 2.4.7 beta issue)</li>
<li>Fixed /admin.cgi?mode=viewxml and /admin.cgi?mode=viewjson requests without a page parameter not being allowed for requests using the stream source password (resolves a 1.x DNAS compatibility issue)</li>
<li>Fixed configuration file writing not saving correctly with non-sequential stream configurations</li>
<li>Fixed default 'pidfile' generation not creating the file in the correct directory when run as a daemon (affects 2.4.x)</li>
<li>Fixed some debug messages from showing when they should not appear in non-debug mode</li>
<li>Fixed passwords containing the # character being incorrectly rejected due to the multi-1.x source support (affects 2.4.7)</li>
<li>Fixed the edit config handler not being able to create the backup config file on Windows (affects 2.4.x)</li>
<li>Fixed the receive and send buffers not being correctly limited in all cases to help prevent overflow issues</li>
<li>Fixed some of the supporting resource methods not providing compressed version of the resource as needed</li>
<li>Fixed ID3v1.x tags not being correctly stripped from intro / backup / adtest files</li>
<li>Fixed streampath allowing /listen to be used which would cause failed stream playback as a playlist would be provided instead of the stream (due to /listen being a reserved url</li>
<li>Fixed the YP connection tester causing listener add metrics requests to be sent</li>
<li>Fixed a number of scenarios where aborting a pending source relay connection would not terminate correctly</li>
<li>Fixed some path resolution issues where accented characters are in the file path</li>
<li>Fixed listeners already connected to a stream before it has obtained information from the YP not being reported to the metrics system and not being applied to advert groups if applicable</li>
<li>Fixed admincssfile not being re-loaded correctly on configuarion file reload</li>
<li>Fixed random crash on accessing the log view</li>
<li>Fixed random crash on closing when trying to write a log message and the logger has already been stopped</li>
<li>Fixed error reporting if there is an issue with configuration file backup and edit actions</li>
<li>Fixed HTTPS urls not being processed correctly causing broken urls on some of the server pages</li>
<li>Fixed handling of 1.x sources and relays which do not provide bitrate information so it is now determined from the stream audio data as needed</li>
<li>Fixed url reported when doing a YP url change not being correctly updated</li>
<li>Fixed advert triggers not always working Ultravox and manual XML title updates</li>
<li>Fixed AAC kbps calculations not being correct in some situations</li>
<li>Fixed a number of streaming related issues if 'short sends' are occurring (which primarily could lead to skips and data loss)</li>
<li>Fixed SHOUTcast 2.x sources reporting their received bandwidth total against SHOUTcast 2.x relays</li>
<li>Fixed some issues with the user agent management page</li>
<li>Fixed trying to ban listeners by user agent with an empty user agents not being handled correctly</li>
<li>Fixed 'http://' being incorrectly added onto some of the 1.x style 'StreamUrl' metadata values</li>
<li>Fixed a number of title update verification issues which were causing title corruption with extended character titles (affects 2.4.x)</li>
<li>Fixed the configuration file re-write option not working correctly in some scenarios</li>
<li>Fixed reported random locking issues being seen on some setups causing the DNAS to appear like it has crashed but is still running and just in a locked state<br><br></li>

<li>Updated the streampath filtering</li>
<li>Updated title filtering mappings</li>
<li>Updated to the latest cacert.pem</li>
<li>Updated to libcurl 7.47.1</li>
<li>Updated to OpenSSL 1.0.2g<br><br></li>

<li>Other code cleanup, minor bug fixes, re-ordering common cases to be checked first, processing reductions, page cleanups and anything else to improve stability, useability and responsiveness of the DNAS server</li>
</ul>
<p><br></p>

<a name="256"></a><h3>2.4.7 Build 256</h3>
<hr>
<ul class="n">
<li>Added multiple 1.x source client support - see the DNAS's 'View Source Connection Details' on the Server Summary page in the interim if needed for the password value to be used or http://wiki.winamp.com/wiki/SHOUTcast_Server_Source_Support</li>
<li>Added ability for listeners to be provided the 'backupfile or 'streambackupfile' when no source connected (see documentation for usage)</li>
<li>Added 'backuploop' and 'streambackuploop' options (default = 0 to keep looping) for controlling the number of consecutive backup file play loops</li>
<li>Added 'backuptitle' and 'streambackuptitle' options for use with the no source backup file support</li>
<li>Added validation of the passwords to ensure the colon character is a special case that is not used</li>
<li>Added a server admin page to show the advert group details of the currently active streams as well as the status of advert pulls</li>
<li>Added visual indication whether a client may play adverts and if it has played any adverts</li>
<li>Added extra parameter checking of the banning / reserved IP actions (including fixing a DNAS lockup / crash due to bad data in some cases)</li>
<li>Added banning a client connection by IP / DNS to also block access to most of the API methods from the server</li>
<li>Added better debug logging of the banning / reserved client access control</li>
<li>Added server admin page to allow for toggling the debug options on / off whilst the DNAS is running without the need to manually edit the config file</li>
<li>Added options to enable / disable all of the debugging options on the server admin page</li>
<li>Added 'streamlisted' and 'streamlistederror' (if applicable) to the stats responses for getting the stream's listed status</li>
<li>Added automatic downloading of newer DNAS builds and related changes to the new version update messages</li>
<li>Added auth / metrics / adverts traffic to the bandwidth tracking page and methods</li>
<li>Added checks to prevent trying to publically list un-supported streams e.g. OGG Vorbis and NSV which are now marked as private</li>
<li>Added the uptime indication to all of the admin pages for better consistency</li>
<li>Added extra handling to better detect the stream bitrate from sources (primarily Icecast relays)</li>
<li>Added clearing the cached stats / playlist responses to the 'clearcache' admin method</li>
<li>Added a generic html5 audio player to the bottom of the stream summary and admin summary pages as a quick way to check what the stream is playing (mp3 streams only and relies on the browser default implementation)</li>
<li>Added caching of the public stats and other commonly accessed pages and resources (1 sec) and playlist (5 sec) responses from the server to improve response times under heavy loads</li>
<li>Added 'startrelays' and 'kicksources' admin modes for batch starting configured relays and batch stopping of all connected sources</li>
<li>Adding a lot of extra parameter validation based on reproduceable crashes and input validation failures</li>
<li>Added support for additional genres on the appropriate DNAS pages, api responses and listener connections (how to access this will follow later)</li>
<li>Added basic support on the Linux build to get some form of crash report with it creating a file like /tmp/sc_serv_segfault_&lt;pid&gt;.log (where &lt;pid&gt; is the process id)</li>
<li>Added better debug output for tracking transitions into and out of the advert plays as well as the number of successful plays</li>
<li>Added a debug column when admetricsdebug=1 is set for better tracking of advert issues in addition to the tooltip shown in the connected column</li>
<li>Added 'referer' and 'x-forwarded-for' values to the listener stats api responses (user request)</li>
<li>Added option on the server admin summary page for manually checking for new versions of the DNAS</li>
<li>Added the current log and conf files to the server admin summary page so it is easier to see what is being used</li>
<li>Added extra 1.x source title UTF-8 conversions which should improve handling of non UTF-8 titles</li>
<li>Added support to provide PSAs for listeners assigned an advert group but there is available advert group to play on advert triggers</li>
<li>Added better checking of advert inserts and frame syncing for AAC based streams to improve playback</li>
<li>Added better memory handling which reduces per-listener and web request memory usage by up to 50% (primarily via structure re-packing and reducing duplication)</li>
<li>Added support for new YP requirements and interaction<br><br></li>

<li>Changed handling of relays from other 2.x DNAS to reduce CPU usage when active (gives a 50% CPU reduction on the RPi build!)</li>
<li>Changed when successful title updates are logged to avoid confusion if it subsequently fails</li>
<li>Changed the public stream status page (index.html?sid=0) to show a bit more information about the active streams (user request)</li>
<li>Changed the public status page text for YP error code 480 to make it clearer why a stream is not listed</li>
<li>Changed the log level for bad title updates from error to warning</li>
<li>Changed some of the threading error messages to be more consistent</li>
<li>Changed all static images provided by the DNAS to come from &lt;server&gt;/images/* for improved caching and speeds up some page loads</li>
<li>Changed 'server' to 'stream' where appropriate on the public and admin pages for better consistency</li>
<li>Changed 'admin login' to 'stream login' and some other related changes for better consistency</li>
<li>Changed invalid bitrates from the source to be reported as 'unknown' instead of '0'</li>
<li>Changed the http handler hand-off to the admin.cgi handler to save some compute cycles (micro-optimisation)</li>
<li>Changed the ordering of the http page handling to detect commonly used pages a bit quicker (micro-optimisation)</li>
<li>Changed the ordering of the http requests and checks done to speed up commonly accessed pages (in-addition to caching changes)</li>
<li>Changed some of the curl instances to only be created when actually needed and to not be done for private stream instances</li>
<li>Changed the advert title display on the song history page to make it clearer what is sent to the clients and what the listener is sent once it's processed</li>
<li>Changed the error messages when core authhash values are missing in the YP responses instead of showing a generic 400 error message</li>
<li>Changed 'streampath' handling to filter some inappropriate values seen including self-referencing addresses</li>
<li>Changed the flow of things in the HTTP request handling to reduce the processing time of such requests</li>
<li>Changed some common listener response strings to be initialised once instead of every time</li>
<li>Changed title updates to filter out duplicate title updates where applicable</li>
<li>Changed all url / ip config value checking to be done consistently and applied to all applicable cases</li>
<li>Changed the Windows builds timer resolution to a preferred method which will not affect the system wide timer resolution (that was a bad thing to be doing)</li>
<li>Changed the station name link to shoutcast.com to use the now preferred method</li>
<li>Changed the 'songhistory' default from 10 to 20 to provide an average of an hour's song history</li>
<li>Changed the 'metainterval ' default from 8192 to 16384 to better match other broadcasting platforms</li>
<li>Changed the display of the log / config files on the admin pages to just show the filename and not a complete / partial filepath with the full path as the tool tip for the items</li>
<li>Changed to show the relay icon for Icecast connections on the listener list so all known relays are clearly visible</li>
<li>Changed to cache the user-agent of the valid client connection to save re-querying them in other parts of the DNAS</li>
<li>Changed 'stream url' to 'website' on the stream summary and admin pages</li>
<li>Changed the timeout for advert pulls to resolve a number of pull failures</li>
<li>Changed the server sources page layout and added some additional information and reference links</li>
<li>Changed the ordering of some of the options on the server admin summary page</li>
<li>Changed logging output to ignore some empty messages that were incorrectly being generated</li>
<li>Changed internal handling of logging to reduce it's resolution which provides a small CPU usage reduction</li>
<li>Change accessing /stats without the 'sid' parameter to follow the 1.x style of stream picking to ensure a valid response is provided</li>
<li>Changed how some parts of the server are built to prevent data being modified when it should not</li>
<li>Changed w3c log archive name to better distinguish from normal log archive naming</li>
<li>Changed the /currentsong and /nextsong responses to not attempt to be compressed as most cases will not be smaller and wastes time to determine this</li>
<li>Changed the Windows event log handling when running as a Windows service to remove superfluous information<br><br></li>

<li>Fixed all reproducible memory and object leaks</li>
<li>Fixed not being able to transition back to the stream on source re-connect if a listener is being provided the backup file</li>
<li>Fixed crash on close (and possibly during running) when trying to clean-up source and client connections (race-condition)</li>
<li>Fixed rare crash on close if processing some of the web requests just after start-up</li>
<li>Fixed crash if the listener client could not be created</li>
<li>Fixed a number of stability and memory allocation issues under high connection loads (a lot of work for a single changelog entry!)</li>
<li>Fixed banning issues which allowed some clients still to connect despite being in the ban list</li>
<li>Fixed some rare relay starting failures when using a forced configuration reload</li>
<li>Fixed minor issues with the HTML of the admin pages</li>
<li>Fixed double-pumping of some title updates via 'admin.cgi?sid=#&amp;mode=updinfo' (mainly affected XML updates)</li>
<li>Fixed the refresh page timer showing the DNAS uptime in some instances</li>
<li>Fixed a wrong message being provided for some failed SC2 source connections</li>
<li>Fixed empty title updates not being allowed (introduced in the last build</li>
<li>Fixed some web requests not being restarted correctly in some cases</li>
<li>Fixed a number of crashes on closing due to some in-progress web requests not being aborted when needed or under high connection loads at the time of closing</li>
<li>Fixed a number of issues if there are issues within libcurl creating connections which could lead to unexpected lockups</li>
<li>Fixed redirection failures on invalid ban / reserved list / user-agent admin pages due to poor input data</li>
<li>Fixed loop-back addresses being added to the invalid ban / reserved list when already treated as a special case</li>
<li>Fixed possible issue with relay failure handling</li>
<li>Fixed wrong name being stored in the w3c log archive</li>
<li>Fixed anything obvious found from re-checking the source code via valgrind, cppcheck and manual checking</li>
<li>Fixed playback skipping issues with WMP due to variations in handling between Windows 7 and Windows 8.x and newer with ICY vs HTTP instances</li>
<li>Fixed reserved IP handling not working correctly due to checking the wrong value in some cases</li>
<li>Fixed to make sure we do not miss the YP maximum update interval</li>
<li>Fixed loading of local files to make use of the relative path fixes (remnent of issues present in 2.4.1 / 2.4.2)</li>
<li>Fixed generation of the 'host' header value on relay connections to include the port and clean up the address as per RFC specifications</li>
<li>Fixed crash when processing the empty lines after a "HTTP/1.1 100 Continue" header</li>
<li>Fixed ID3v1.x tag removal not working correctly on intro and backup file cleanup</li>
<li>Fixed adverts not being triggered reliably when using a 2.x based source</li>
<li>Fixed adverts not being triggered correctly when running as a private stream in any of the cdn modes</li>
<li>Fixed all other reported advert related handling issues</li>
<li>Fixed handling of some externally sent admin.cgi requests incorrectly getting a redirect response</li>
<li>Fixed 'songhistory' not being updated on a configuration reload</li>
<li>Fixed failures to transition into an advert with a 1.x listener client (e.g. format mis-match) then blocking later advert transitions</li>
<li>Fixed YP connections from being processed via the auth handling</li>
<li>Fixed title updates via 'admin.cgi?sid=#&amp;mode=updinfo' not always working or not being providing the expected HTTP response (affected some LiquidSoap uses)</li>
<li>Fixed our OpenSSL and libcurl instances to be built correctly for SNI (Server Name Indication)</li>
<li>Fixed the wrong log file being shown and reported as being used if the DNAS has to use it's fallback handling to try to ensure a log file will be generated</li>
<li>Fixed display issues of long intro and backup filepaths in the admin pages<br><br></li>

<li>Updated icons for recognised clients as well as setting a warning icon for some likely stream rippers on the listeners list</li>
<li>Updated the YP maintenance code and message reporting</li>
<li>Updated to the latest cacert.pem</li>
<li>Updated to OpenSSL 1.0.2a</li>
<li>Updated to libcurl 7.41.0<br><br></li>

<li>Removed the experimental 'streamportlegacy' option as this is no longer needed now with the multi-1.x source support that was added</li>
<li>Removed the state_GetStreamData debug output for SC1 sources</li>
<li>Removed incorrect header message on the debug options page</li>
<li>Removed "Connection:close" for some of the admin page actions header response to speed up some page loads</li>
<li>Removed the Windows builds dependency on the supporting dlls in the Microsoft.VC90.CRT folder</li>
<li>Removed 'autoauthhash' functionality due to coming authhash management changes</li>
<li>Removed the authhash removal action due to coming authhash management changes</li>
<li>Removed 'email' functionality due to coming authhash management changes</li>
<li>Removed SSLv2 and SSLv3 support in our OpenSSL and libcurl instances</li>
<li>Removed direct use of gethostbyname(..)</li>
<li>Removed AIM, IRC and ICQ support from the web pages and api responses (they have not been supported by the YP for a number of years)<br><br></li>

<li>Other code cleanup, minor bug fixes, page cleanups and anything else to improve stability, useability and responsiveness of the server</li>
</ul>
<p><br></p>

<a name="167"></a><h3>2.4.2 Build 167 / 168</h3>
<hr>
<ul class="n">
<li>Fixed issues with not finding cacert.pem in the same location as the DNAS program file which was preventing YP connectivity working (2.4.1 build 164 specific)</li>
<li>Fixed broken relative config file handling not working correctly with init scripts and 3rd party control panels (2.4.1 build 165 specific)<br><br></li>

<li>Changed some of the log and admin page output to better show the actual filepath being used for log and configuration files (helpful for determining path loading issues)</li>
<li>Changed handling incase the cacert.pem file cannot be found to be more forgiving for the time being (futher changes will follow in later builds)<br><br></li>

<li>Removed 'Error writing to console' log messages when <b>screenlog=1</b> (default) and the shell the DNAS was started in is closed whilst the DNAS is still running e.g. due to OS defined timeouts - always use <b>screenlog=0</b> if running the DNAS and you do not need it sending log output to the console</li>
</ul>
<p><br></p>

<a name="165"></a><h3>2.4.1 Build 164 / 165</h3>
<hr>
<ul class="n">
<li>Added features relating to the 'DNAS+ for CDN' streaming solution<br><br></li>
<li>Added ability to preserve the peak listener numbers for a stream between DNAS sessions e.g. when updating the DNAS (subject to conditions) - this requires the stream being publically listed and will be disabled if found to be abused!</li>
<li>Added <u>experimental</u> support to allow streams using 1.x source clients to be able to provide stream branding artwork via 'artworkfile' and 'streamartworkfile' configuration options (this enables basic stream branding artwork support for legacy 1.x based streams subject to client support [as below] - for 2.x based streams, the source should already have the ability to provide the stream branding and now playing artwork)</li>
<li>Added ability to provide artwork to 1.x clients via the legacy in-stream metadata system when provided from a 2.x source or when using the experimental support mentioned above (subject to clients supporting this feature - see the wiki for more information)</li>
<li>Added 'email' configuration option so hosts can provide a generic contact address (which is used during authhash creation / updates if not manually specified)<br><br></li>

<li>Changed YP connections to use HTTPS - this means a valid cacert.pem <u>must</u> be present in the same folder as the DNAS program file otherwise the DNAS cannot list streams</li>
<li>Changed file permission defaults on non-Windows builds to be more consistent between the different APIs internally used for files created by the DNAS</li>
<li>Changed the update notifications to provide extra information where possible about the update<br><br></li>

<li>Fixed YP connectivity issues introduced during the change over to using libcurl in the 2.2.2 / 2.4 releases e.g. randomly stops updating or prevents the DNAS from being able to close correctly or does not correctly handle cases when the YP is not contactable</li>
<li>Fixed handling of custom streampaths with parameters (starting with /; or ;) always providing stream #1 (using /stream/x/ did not experience this issue)</li>
<li>Fixed rare issue leading to high CPU usage when using a single core non-Windows system</li>
<li>Fixed rare crash when accessing some of the admin pages on non-Windows builds</li>
<li>Fixed some IP formatting issues on the admin pages<br><br></li>

<li>Removed remaining ICY support so all client connections are now via standard HTTP requets as 2.4 did (ICY was a HTTP-like protocol)</li>
<li>Removed the 'disableicy' configuration option for controlling this support (not needed due to the prior change)<br><br></li>

<li>Updated to support newer YP requirements for authhash handling and listing modes as well as related tweaks to the authhash management pages</li>
<li>Updated to OpenSSL v1.0.1j<br><br></li>

<li>Return of the BSD 8.x build<br><br></li>

<li>Other miscellaneous code changes, improvments and related documentation updates (including handling immediate segfaults on start-up)</li>
</ul>
<p><br></p>

<a name="147"></a><h3>2.4.0 Build 147</h3>
<hr>
<ul class="n">
<li>Added support for the Radionomy advert and metrics platforms so you can earn money from overlaying some adverts on the stream and / or leveraging the online broadcasting tools from Radionomy (this is an opt-in feature and requires a Radionomy account - it does not prevent you using the DNAS like before)<br><br></li>

<li>Added 'publicip' to be used to specify a DNS / IP value to use for what the YP will see as your server address when 'destip' is used for binding against a non-public value e.g. anything in the loopback address range (see documentation for usage)</li>
<li>Added 'alternateports' which can be used to allow for client only connections on port(s) other than 'portbase' e.g. to deal with firewalls blocking client access on some networks</li>
<li>Added 'disableicy' to the options handled by the configuration reload action</li>
<li>Added 'rotateinterval' to allow for changing the time between automatic log rotations (default is 24 hours) and can be set to 0 to disable log rotation completely</li>
<li>Added basic command-line help into the DNAS itself (use /? or --help) which is based on the OS version being used without the need to consult the main documentation</li>
<li>Added better handling of the intro and backup files to ensure they match the stream format and will now reject files which do not match the bitrate<br><br></li>

<li>Changed 'disableicy=1' handling (default behaviour since 2.2.2) to allow 1.x clients which explicitly request in-stream metadata to still receive it e.g. VLC and foobar2000<br><br></li>

<li>Fixed crash when rotating the log and w3c files (this was mainly seen under Centova Cast installs) and some other log file handling refinements</li>
<li>Fixed authhash issues specific to the 2.2.2 release (mainly seen as a 462 error code when trying to use the management actions)</li>
<li>Fixed handling of unrecognised loopback addresses causing incorrect addresses in some of the DNAS responses e.g. the listen.* methods</li>
<li>Fixed MP3 intro files breaking stream playback (such as causing stuttering or just not playing anything else) when transitioning to the actual audio stream e.g. most Flash based players (this is an issue going all the way back to the v1.x DNAS!)</li>
<li>Fixed MP3 streams not starting on a full audio frame (this should improve client compatibility, more so with Flash based players)
<li>Fixed the 'Block User Agent' column on the stream admin page not showing the correct action (it could be shown in the 'Reserve Client' in some cases)</li>
<li>Fixed repeated admin login prompt when trying to manage an authhash in some cases (mainly if having per-stream admin passwords)<br><br></li>

<li>Removed specific handling for the deprecated AOL shoutcast.com site / embeddable Flash player (that specific player is no longer officially supported hence removing support for it)<br><br></li>

<li>Other miscellaneous code changes, improvments and related documentation updates</li>
</ul>
<p><br></p>

<a name="123"></a><h3>2.2.2 Build 123</h3>
<hr>
<ul class="n">
<li>The first Radionomy provided SHOUTcast DNAS release after the sale of SHOUTcast (and Winamp) in January 2014</li>
<li>This is primarily a maintenance release to resolve issues and broadcaster requests with the 2.2.x DNAS since the last build provided under AOL ownership<br><br></li>
<li>Added 'pidfile' option to control the creation of the file containing the process id of the DNAS (this defaults to creating 'sc_serv_&lt;portbase&gt;.pid if not specified in the same folder as the DNAS)</li>
<li>Added ability to block user agents from connecting to the streams on a global and per-stream basis if required (via admin pages and admin api methods)</li>
<li>Added 'agentfile', 'streamagentfile' and 'saveagentlistonexit' configuration options to allow for where and how the sc_serv.agent file is stored (which is used for holding the blocked user agents)</li>
<li>Added 'blockemptyuseragent' configuration option to allow for preventing client connections without a user agent from connecting (note: some valid clients e.g. some hardware devices may not provide a user agent and enabling this may incorrectly block legitimate client connections)</li>
<li>Added 'Reload Banned List(s)' option to the server admin page to complement the 'Reload Reserved List(s)' option<br><br></li>

<li>Changed network handling on non-Windows builds to try to resolve the random crashes with large listener numbers and scale better (e.g. going over ~330 concurrent listeners)</li>
<li>Changed to use libcurl instead of a custom library for all YP requests to help resolve the YP connection reliability issues some users have seen with most of the 2.x releases</li>
<li>Changed 'disableicy' default from '0' to '1' so we now by default provide HTTP instead of ICY headers - this resolves all known HTML5 audio playback access issues</li>
<li>Changed the frequency and formatting of some of the log output</li>
<li>Changed 'unique' to also apply to the 'portbase' config option</li>
<li>Changed log file creation to use sc_serv_&lt;pid&gt;.log (where &lt;pid&gt; is the process id of the DNAS) if the default / fallback 'sc_serv.log' cannot be created e.g. due to file permissions creating / accessing an existing copy of the file (mainly affects non-Windows builds)</li>
<li>Changed 'maxuser' default from 32 to 512 listeners (you will need to ensure the OS can support this e.g. adjusting ulimit -n on non-Windows installs)</li>
<li>Changed 'relayreconnecttime' default from 30 to 5 seconds (based on usage feedback)</li>
<li>Changed 'adaptivebuffersize' default from 5 to 10 seconds (based on usage feedback)</li>
<li>Changed GCC version used to build the Linux / Raspberry Pi versions (now using GCC 4.7.2 instead of GCC 4.4.6 / 4.6.3 respectively)</li>
<li>Changed title update handling in respect to issues related to CVE-2014-4166 (which we were not informed about before it was disclosed!)<br><br></li>

<li>Fixed stream access issues (always providing stream #1) if streampath=/stream is set and providing multiple streams from the same DNAS</li>
<li>Fixed formatting error in the JSON version of the listener details (XML version was not affected)</li>
<li>Fixed some file handle leaks with log file handling (mainly happened when compressing older log files on rotation)</li>
<li>Fixed a number of YP error handling issues (mainly found from changing over to use libcurl) e.g. stuck on 'Processing...' when an error was logged</li>
<li>Fixed the 'city' value of the authhash not being correctly re-loaded when viewing the authhash<br><br></li>

<li>Other miscellaneous code changes, improvments and related documentation updates</li>
</ul>
<p><br></p>

<a name="109"></a><h3>2.2.1 Build 109 <a style="font-size:55%;" href="#">[top]</a></h3>
<hr>
<ul class="n">
<li>Completed remaining 1.x compatibility improvements (specifically relating to YP availability issues so clients are now only blocked from connecting if there is no source connected)<br><br></li>

<li>Added experimental 'streamportlegacy' option to allow for supporting more than one direct legacy 1.x source connection to the server (see documentation for usage / limitations)<br><br></li>

<li>Changed Windows service install / uninstall messages when UAC elevation / admin access is required to undertake the action<br><br></li>

<li>Fixed issues due to a bug in the handling of the 'useicy' option which is now deprecated and replaced by the 'disableicy' option (see documentation for usage)</li>
<li>Fixed reported issues with the 'Source Login Details' page (mainly showing mode availability incorrectly)</li>
<li>Fixed missing 'UID' value for client disconnects in the main log output</li>
<li>Fixed some clients being incorrectly shown as 'HTML5' client types when they were not on the admin pages</li>
<li>Fixed compile issues preventing the BSD build from being built for the prior release<br><br></li>

<li>Other miscellaneous code changes, improvments and related documentation updates</li>
</ul>
<p><br></p>

<a name="107"></a><h3>2.2.0 Build 107 <a style="font-size:55%;" href="#">[top]</a></h3>
<hr>
<ul class="n">
<li>Added a 'setup' mode which allows basic configuration of the server when run without a configuration file (see documentation for usage)</li>
<li>Added a 'builder' mode which allows for the configuration builder to be run within the server (broadcasting is disabled in this mode)</li>
<li>Added automatic authhash generation when a stream source is connected on a public stream and an authhash was not already present (can be disabled using autoauthhash=0)</li>
<li>Added /statistics which consolidates all of the /stats?sid=# results for all known and active streams</li>
<li>Added 'flashpolicyserverport' allowing the DNAS to serve up the Flash policy file (as per 'flashpolicyfile') on port 843 or a custom port (as well as on 'portbase')</li>
<li>Added serving of 'shoutcast.swf' for custom flash players to be handled in the same domain as the server (see documentation for usage)</li>
<li>Added listen.xspf and listen.qtl to the /listen* playlist options available (so now pls, m3u, asx, qtl and xspf are available on a stream)</li>
<li>Added 'portlegacy' to allow changing or disabling the port legacy 1.x sources connect on (see documentation for usage)</li>
<li>Added 'publicport' to allow changing the port reported to the YP servers and any clients using the /listen.* playlists where 'portbase' is not the port externally seen</li>
<li>Added option on 'Server Summary' page (accessed from admin.cgi?sid=0) to allow for manually setting the stream authhash e.g. if needed for a relay</li>
<li>Added 'Stream DJ' (if known) on the stream admin pages as well as &lt;DJ/&gt; in all statistics for getting the current DJ of the connected source (more formal specification than fiddling the IRC / AIM / ICQ values as used with 1.x DNAS setups)</li>
<li>Added 'streammaxbitrate' and 'maxbitrate' options for per-stream or global limiting of the source bitrate allowed for a connection</li>
<li>Added 'streambackupurl' option for per-stream fallback if the original source (direct or via a relay) fails to keep the stream alive (see documentation for usage)</li>
<li>Added server bandwidth usage reporting for the server administrator via the admin.cgi?mode=bandwidth action (see documentation for usage)</li>
<li>Added JSON and JSON-P responses to the /stats?sid=# and /statistics responses by appending &amp;json=1 for JSON and appending &amp;callback=&lt;function&gt; for JSON-P</li>
<li>Added XML, JSON and JSON-P support to the /played response as well as to support &amp;pass to allow song history access to the XML, JSON and JSON-P responses even when public display of them is disabled</li>
<li>Added admin.cgi?mode=viewjson as a JSON and JSON-P equivalent of admin.cgi?mode=viewxml (see documentation for usage)</li>
<li>Added ability to kick all connected clients on a stream via the stream admin summary page in addition to the existing single client kicking</li>
<li>Added 'redirecturl', 'streamredirecturl' and 'streamhidestats' options for per-stream or global redirection / blocking of publically accessible pages when 'hidestats' or the new 'streamhidestats' options are enabled</li>
<li>Added SIGUSR1 and SIGUSR2 support in non-Windows builds for reloading the configuration file from the console (see documentation for usage)</li>
<li>Added SIGWINCH support in non-Windows builds for reloading the Reserved IP file(s) from the console (see documentation for usage)</li>
<li>Added support for GZIP (RFC 1952) encoding of appropriate page and data responses if supported by the requesting connection and will provide a bandwidth saving</li>
<li>Added a 'View Source Login Details' page to the server summary page to make it easier to get the login details required for all appropriate stream configurations</li>
<li>Added sp=&lt;streampath&gt; support to all web methods which support sid=&lt;streamid&gt; to be able to access a page by streampath instead of streamid - streamid is still the preferred method (see documentation for usage)</li>
<li>Added 'admin.cgi?mode=viewlog&amp;viewlog=save' method to allow for downloading the server log output as a GZIP compressed archive (useful for checking the log output remotely or for support issues)</li>
<li>Added 'streammovedurl' option for per-stream redirection of permanently stopped or moved streams from the server</li>
<li>Added archiving of log, w3c and streamw3c files when rotating these files would cause them to be deleted (which happens when there are usually five rotated copies already)</li>
<li>Added 'logrotates' and 'logbackup' options to provide finer control over the rotation (default of 5 files) and backup (default off) of the log files during rotations</li>
<li>Added icy=http parameter detection on 1.x client connections to return a HTTP instead of a ICY header response type e.g. server:port/?icy=http</li>
<li>Added 'url' parameter to the 'updinfo' action to replicate 1.x DNAS functionality which had not been re-implemented in the 2.x DNAS</li>
<li>Added 'dj' parameter to the 'updinfo' action to allow for scripted updating of the 'DJ' reported for a stream (useful for legacy source software)</li>
<li>Added 'ypstatus' method for the server administrator via the admin.cgi?mode=ypstatus action (see documentation for usage)</li>
<li>Added reporting of the stationid for public listings on the server and stream administrator pages</li>
<li>Added 'streamuptime' to the /stats and /statistic responses to aid in monitoring of the length of source connections to the server</li>
<li>Added /streamart?sid=# and /playingart?sid=# methods as a public version of the verions viewable via 'admin.cgi?mode=art&amp;sid=#'</li>
<li>Added back /7(.html) support due to issues in getting legacy reporting tools updated to support the recommended 'stats' methods</li>
<li>Added admin.cgi?mode=history as an admin page equivalent of played.html?sid=# so stream administrators can easily see the played history of the stream</li>
<li>Added 'useicy' option to control if the DNAS will provide ICY (default) or HTTP (HTML5 compatible) headers for client connections<br><br></li>

<li>Improved YP interaction when the IP address of the DNAS changes whilst it is still broadcasting (requires YP update for this to work fully)</li>
<li>Improved handling of source relay connections especially via the server's admin pages e.g. a pending source relay connection can be aborted</li>
<li>Improved handling with large client numbers to reduce CPU usage as well as not crashing when exhausting the imposed maximum file descriptors (e.g. ulimit -n)<br><br></li>

<li>Changed 'streampath' to default to / for streamid=1 to improve compatibility (/stream/&lt;sid&gt;/ is still default on all other streams)</li>
<li>Changed config file handling to automatically use 'sc_serv.ini' or 'sc_serv.conf' if present if no config file is specified (better replicates 1.x DNAS behaviour)</li>
<li>Changed relayconnectretries to accept zero (relayconnectretries=0) to keep trying to reconnect to the relay source and changed the default to 0 from 3</li>
<li>Changed reporting of the YP connection state on the admin pages to make it clearer if the authhash is invalid or empty</li>
<li>Changed the 'Stream Configurations' xml response to fill &lt;STREAMAUTHHASH/&gt; with EMPTY or INVALID on error as applicable</li>
<li>Changed YP2 connection attempts to not be made if the authhash is determined to be invalid or empty</li>
<li>Changed 'hidestats' to allow for more control over the pages which are able to be disabled (see documentation for usage)</li>
<li>Changed 'updinfo' to not need 'type=xml' as it now auto-detects how to process the title information received</li>
<li>Changed 'configrewrite' to accept 'configrewrite=2' so now 'configrewrite=1' generates minimal configurations (only saves values not at the default) and 'configrewrite=2' outputs all configuration options (like 'configrewrite=1' used to do)</li>
<li>Changed YP2 handling to show the stream number, outputting of detailed error messages (where provided) and not output /yp/resp/updatefreq errors</li>
<li>Changed handling of the SHOUTcast site player client connections to not send in-stream metadata to workaround issues with title changes</li>
<li>Changed song history and current song titles shown in any reports to use the pre-formatted title from the source if available (does not change titles in clients)</li>
<li>Changed handling of introfile to attempt to strip any tags from the raw file to improve client compatibility</li>
<li>Changed client listener reports (via the stream administrator page and xml reports) to now be sorted oldest to newest</li>
<li>Changed w3c log handling to output header information to improve tool compatibility (replicates 1.x DNAS behaviour)</li>
<li>Changed handling of 'streamid' so if not specified then a stream configuration will be created if any appropriate stream* options are read on loading</li>
<li>Changed SHOUTcast 2 source logging to only output complete metadata and connection details when using uvox2sourcedebug=1 (instead of always as before) </li>
<li>Changed all /listen* playlist options to output the 'backupserver' provided by the YP where possible</li>
<li>Changed some of the server and stream admin page header links to better hide invalid options and to make navigation easier, etc</li>
<li>Changed the configuration reload option ('admin.cgi?mode=reload' on the 'Server Summary' page) to also update the debugging options and other options (see documentation for additions)</li>
<li>Changed Reserved IP handling to allow connections from 127.0.0.1 through even if not specified (allows access to admin pages)</li>
<li>Changed the Ban and Reserve IP administration actions to save changes (if enabled) at the time instead of only on exit</li>
<li>Changed YP2 stream registration to wait until the source has provided a title to allow the station listing to appear sooner (requires YP update for this to work fully)</li>
<li>Changed handling of authhash changes via the update option to update the current stream information without requiring the stream(s) to be restarted</li>
<li>Changed server summary page to count inactive relay configurations (if correctly specified) as available streams so it is possible to restart them easier</li>
<li>Changed the user agent (mainly for relay connections) to now be 'Ultravox/2.1 SHOUTcast Server x.x.x.x' (where x.x.x.x is the version and build numbers)</li>
<li>Changed the stream admin page to also report the type (1.x or 2.x) of the connected clients</li>
<li>Changed the current listener list on the admin summary page (admin.cgi?sid=#) to group client connections from the same IP address (make non-unique connections easier to find)</li>
<li>Changed all /listen.* handling to use the public IP of the DNAS as reported by the YP when publically listed (requires YP update for this to work fully)</li>
<li>Changed 'flashpolicyfile' handling to use an internal copy if a custom file is not specified (which has the benefit of specifying the actual ports used)</li>
<li>Changed console output to highlight errors in red, warnings in yellow and debug output in green to make them more obvious (cannot be disabled)</li>
<li>Changed the 'view logfile' administration pages to highlight errors, warnings and debug output to make them more obvious (colours can be changed via css)</li>
<li>Changed /stats?sid=# to support &amp;pass to allow stats access even when public display of them is disabled</li>
<li>Changed Windows builds to only send warning and error messages to the event log in service mode or if a critical error happens on startup before file logging occurs</li>
<li>Changed autodumpsourcetime and streamautodumpsourcetime to be known as autodumptime and streamautodumptime respectively to better reflect the general usage of these options</li>
<li>Changed server summary page to display configured but non-running configurations along with active sources and inactive relay configurations</li>
<li>Changed 'yptimeout' default from 60 to 30 seconds</li>
<li>Changed 'Shoutcast Metadata Puller' handling to only return the title update (if enabled) instead of the audio data to help save bandwidth on popular listed streams</li>
<li>Changed GCC version used to build the Linux versions (now using GCC 4.4.6 instead of GCC 4.1.2 from CentOS 5.8)</li>
<li>Changed 'admin.cgi?sid=#&amp;mode=kickdst' to support IP address(s) in addition to the existing unique client id(s) support<br><br></li>

<li>Removed Ultravox 2.0 (old Aol Radio) client and source support (reduces memory and cpu usage - amount depends on the setup used)</li>
<li>Removed 'yp2' configuration option and the ability to run the DNAS in YP1 mode<br><br></li>

<li>Fixed all reported issues with the authhash management system since it was first released for public use</li>
<li>Fixed random crashes due to incomplete / dodgy client requests made to the server (resolved from user reports)</li>
<li>Fixed destip not being followed for YP connections so binding to a different IP or using a DNS name should now work (requires YP update for this to fully work)</li>
<li>Fixed some rare issues with binding to a custom destip failing when it should have worked</li>
<li>Fixed updating of 'streampath' not causing a YP details refresh (remove then add) on any changed stream configurations</li>
<li>Fixed crash on Windows versions after choosing a config file to use when run without write permissions to create 'logfile' when no config file is specified</li>
<li>Fixed crash on non-Windows versions when processing invalid xml metadata from sources</li>
<li>Fixed some attempts to create / update authhashes not working due to url-encoding issues with the data passed on to the YP</li>
<li>Fixed handling of clearly invalid authhashes to not show the update and remove admin options</li>
<li>Fixed handling of 'unique' causing the DNAS to lockup on loading in some scenarios</li>
<li>Fixed some relative path issues when using 'include' in some scenarios</li>
<li>Fixed 1.x sources not able to connect if icy-name / icy-url are empty even if titleformat / urlformat have been specified</li>
<li>Fixed stream url on the summary pages not providing valid links in some scenarios</li>
<li>Fixed MAXLISTENERS on /stats?sid=# reporting maxuser instead of streammaxuser when no source is connected</li>
<li>Fixed UID in the Listener Stats being output in the wrong number format</li>
<li>Fixed the 'Unique Listeners' total on the administrator summary page not always reporting the correct number</li>
<li>Fixed the SHOUTcast Directory metadata puller / tester client statistics filtering due to related YP changes</li>
<li>Fixed accessing the root summary page with the Opera browser to not start streaming like a client connection</li>
<li>Fixed /currentsong?sid=# not returning a title if present when songhistory or streamhistory is zero</li>
<li>Fixed titles not appearing in the SHOUTcast Directory listings when using a 1.x source in some scenarios</li>
<li>Fixed some 1.x sources (e.g. butt) not being able to connect in some cases due to non-standard icy* headers received</li>
<li>Fixed the windows w3c log file outputting additional linebreaks which were not required</li>
<li>Fixed some Winamp v5.5x clients being incorrectly sent a 2.x instead of a 1.x SHOUTcast stream (resolves missing stream titles)</li>
<li>Fixed loading issues related to not being able to create the logfile and force reverts to default path</li>
<li>Fixed OS path conversion on config file entries not always working e.g. when moving a windows config to linux</li>
<li>Fixed relays not running if http:// was not specified (is now automatically appended internally)</li>
<li>Fixed additional issues relating to relay connection errors including not following the retry timeouts in all scenarios or not attempting to reconnect in specific scenarios</li>
<li>Fixed the next song being incorrectly reported at times or not being correctly cleared as applicable</li>
<li>Fixed enabling 'riponly=1' blocking access to the admin pages of the DNAS plus it now allowa connections from 127.0.0.1 / localhost through even if not added to the list (for local monitoring)</li>
<li>Fixed Banned and Reserved IP checks not always working (better validates against per-stream and global lists now)</li>
<li>Fixed handling of user agents with invalid control characters causing log / reporting issues</li>
<li>Fixed issues with 'admin.cgi?mode=reload' attempting to keep updating values which were already updated or incorrectly removing additional stream configurations when only 1 needed removing</li>
<li>Fixed accessing a stream using 'streampath' not working correctly in all cases e.g. when no / was prefixed for the entry in the configuration file</li>
<li>Fixed current song display issues with some 1.x based relays where non-english characters are present and were not correctly handled as utf-8</li>
<li>Fixed issues with multiple connection attempts generated for an already pending relay connection via the configuration reload or 'startrelay' method or when a relay is removed but was pending</li>
<li>Fixed issues with Windows service and non-Windows daemon use primarily when no configuration file is specified (see documentation for amended usage)</li>
<li>Fixed more clients than is specified for (stream)maxusers if only reserved clients are allowed to connect to the server (will reject reserved clients if no one can be kicked to free a slot)</li>
<li>Fixed listen.pls generation for NSV streams generating incomplete playlists (all other playlist formats were generated correctly)</li>
<li>Fixed out of order metadata packets being incorrectly handled if another metadata packet of a different type is received whilst waiting on an existing type (mainly affected in-stream artwork)</li>
<li>Fixed checking for configuration files not always working on non-Windows versions or incorrectly reporting a directory as a valid file</li>
<li>Fixed 'w3clog' and 'streamw3clog' not always being rotated when using SIGHUP or when the main log file is auto-rotated or on starting the server</li>
<li>Fixed DNS lookup issue on non-Windows builds which could prevent access to the SHOUTcast servers</li>
<li>Fixed crash when getting repeated connection attempts and no source is connected in rare cases</li>
<li>Fixed some invalid characters being kept from song title updates which could cause some of the XML responses being invalid</li>
<li>Fixed title updates from some 1.x based sources not being accepted when allowed by a 1.x based DNAS server previously</li>
<li>Fixed some DNAS provided web page access failing in specific OS and machine configurations<br><br></li>

<li>Upgraded libraries to use expat-2.1.0<br><br></li>

<li>Other miscellaneous code changes, de-duplication of error messages, cleanup of normal running log messages, admin page tweaks and minimisations, improvments and related documentation updates</li>
</ul>
<p><br></p>

<a name="29"></a><h3>2.0.0 Build 29 <a style="font-size:55%;" href="#">[top]</a></h3>
<hr>
<ul class="n">
<li>Changed SHOUTcast 2 client header to show the DNAS's actual version instead of just 'SHOUTcast 2.0'<br><br></li>

<li>Fixed SHOUTcast 2 compatible clients only allowed to connect as a SHOUTcast 1 client (build 27 / 28 specific)</li>
<li>Fixed more config files being shown than allowed on non-Windows versions when no configuration file specified</li>
</ul>
<p><br></p>

<a name="28"></a><h3>2.0.0 Build 28 (RC 2) <a style="font-size:55%;" href="#">[top]</a></h3>
<hr>
<ul class="n">
<li>Added listen.asx to the /listen* playlist options available (so now pls, m3u and asx are available on a stream)</li>
<li>Added detection of sc_serv.ini if no configuration file was passed on loading (detects 1.x configuration files)</li>
<li>Added 'type=xml' parameter to the 'updinfo' action to allow for 2.x style XML metadata titles to be manually done<br><br></li>

<li>Changed 'streampath' handling to allow '/' to be used again (was disabled in build 27)<br><br></li>

<li>Fixed kicking of listeners failing to respond / taking multiple attempts to react<br><br></li>

<li>Other miscellaneous code changes, improvments and related documentation updates</li>
</ul>
<p><br></p>

<a name="27"></a><h3>2.0.0 Build 27 (RC 1) <a style="font-size:55%;" href="#">[top]</a></h3>
<hr>
<ul class="n">
<li>Added ability to create, update and remove authhashes via the administrator summary page (accessed from admin.cgi?sid=0)</li>
<li>Added reporting of per-stream and total server listener counts on admin.cgi or admin.cgi?sid=0</li>
<li>Added 'streamw3clog' option for per-stream logging with fallback to 'w3clog' if not specified</li>
<li>Added 'faviconfile' and 'faviconmimetype' to allow for a local icon / image file to be served as the favicon.ico for the server webpages</li>
<li>Added 'robotstxtfile' to allow for a local robots.txt to be served as the robots.txt for the server</li>
<li>Added supporting features for in-stream artwork (related to March 2011 protocol changes) with online verions viewable via 'admin.cgi?mode=art&amp;sid=#' for admins to check (see documentation for usage)</li>
<li>Added /stats?sid=# to allow easier access to the stream information (this mirrors admin.cgi?sid=#mode=viewxml&amp;page=1) and is the effective replacement of 7.html</li>
<li>Added 'hidestats' to allow disabling of the new /stats?sid=# mode (see documentation for usage)</li>
<li>Added 'admin.cgi?mode=rotate' and SIGHUP support to rotate 'logfile', 'w3clog' and 'streamw3clog' whilst sc_serv is running (see documentation for usage)</li>
<li>Added ability to restart a kicked relay source via the administration pages</li>
<li>Added 'relayconnectretries' to control how many times a relay attempts to reconnect to the specified source before it is failed</li>
<li>Added a 5 second refresh delay when 'admin.cgi?mode=reload' is used and results in changes to source connections / relays unlikely to be displayed immediately</li>
<li>Added back clickable link support for IRC stream entries on the administration pages only if the IRC stream entry begins with irc://</li>
<li>Added UNIQUELISTENERS to admin.cgi?mode=viewxml to complement REPORTEDLISTENERS (as the server status pages display)</li>
<li>Added STREAMPATH to admin.cgi?mode=viewxml for pages 0, 1 and 6 to show the 'streampath' of the specified stream configuration otherwise will output /stream/&lt;sid&gt;/<br><br></li>

<li>Changed the ban action for connected clients on the administation pages to also kick the client connection used for the ban action</li>
<li>Changed accessing stream and root urls (i.e. http://ip:port or http://ip:port/stream/1) in a browser to show the html pages (index.html) instead of providing the stream (replicates 1.x DNAS behaviour)</li>
<li>Changed the /listen* handling to improve auto-filling of the server IP in the generated playlist files</li>
<li>Changed the /listen* handling to attempt to provide a title much like the YP generated playlist files instead of just an address</li>
<li>Changed the delimiter in file paths read from the configuration file to be converted to the correct format for the OS being used</li>
<li>Changed the admin.cgi?mode=viewxml action to return a slimmer xml response compared to prior builds (to save more bandwidth)</li>
<li>Changed the rotate action to reset the 1 day delay until the next automatic rotation if a rotate is manually run</li>
<li>Changed how the SHOUTcast Directory metadata puller / tester is handled in client statistics to no longer skew listener totals</li>
<li>Changed how the version of the DNAS is reported to make it more like the 1.x DNAS as well as fixing it not being reported in some error response<br><br></li>

<li>Removed REPORTEDLISTENERS from admin.cgi?mode=viewxml for pages 0 and 1 as it duplicated the CURRENTLISTENERS entry</li>
<li>Removed POINTER from admin.cgi?mode=viewxml for page 3 as it duplicated the UID entry</li>
<li>Removed direct support for specifying 'relayport' and 'relayserver' (though if found then they are mapped to streamrelayurl against streamid=1 and will be removed if using configrewrite=1)<br><br></li>

<li>Fixed 'autodumpsourcetime' and 'streamautodumpsourcetime' not being applied correctly especially if either were set to 0</li>
<li>Fixed usage of 'streampath' in the listen playlists generated to ensure the formed playlist entry will work where possible for client connections</li>
<li>Fixed connection issues with YP directory listings when no 'streampath' is specifed (now ensures /stream/&lt;sid&gt;/ is set as the path so connections will be made against the correct stream)</li>
<li>Fixed some client connection issues when 'streampath' has been specifed (could lead to sid=1 being played even if the streampath_2 was attempted)</li>
<li>Fixed non-english title compatibility with 1.x sources i.e. titles with accented characters, was leading to title issues (also affected legacy DNAS builds)</li>
<li>Fixed some specific stream configuration issues with not all values being correctly mapped to the expected stream configuration</li>
<li>Fixed 'admin.cgi?mode=viewlog' to escape the log file contents correctly so appears correctly in the html output</li>
<li>Fixed issues with 'admin.cgi?mode=reload' where it could cause a lockup (non-Windows versions), caused incorrect removal of a configuration groups, source password changes not always applied, relays not being updated or started in all cases</li>
<li>Fixed logfile not being correctly set if no config file is passed but a selection is then made from the list shown</li>
<li>Fixed kicking and banning not working in some cases</li>
<li>Fixed issues handling invalid stream id values on source counnection attempts</li>
<li>Fixed crash when attempting to use configuration groups where 'streamrelayurl' contains an url</li>
<li>Fixed incorrect loading of some 1.x DNAS boolean based configiruation options</li>
<li>Fixed 'allowrelay=0' from preventing connection attempts to be made to the YP directory when there is no relay</li>
<li>Fixed crash when changing a stream's authhash and then doing a configuration reload</li>
<li>Fixed 'include' not working with some relative file paths e.g. include=sc_serv_debug.conf when include=.\sc_serv_debug.conf worked</li>
<li>Fixed listen.m3u not always providing a valid stream url especially when using 'streampath'</li>
<li>Fixed 'configrewrite' to no longer write some old / invalid configuration options when enabled<br><br></li>

<li>Other miscellaneous code changes, crash fixes, improvments and related documentation updates</li>
</ul>
<p><br></p>

<a name="19"></a><h3>2.0.0 Build 19 (Beta) <a style="font-size:55%;" href="#">[top]</a></h3>
<hr>
<ul class="n">
<li>Changed password handling to not allow 'password' to be the same as 'adminpassword' with relevant checks on the per-stream passwords</li>
<li>Changed Ultavox 2.0 Winamp clients (typically prior to v5.60x) to receive a 1.x SHOUTcast stream instead of an Ultravox 2 stream to resolve missing stream titles</li>
<li>Changed some of the reported details in the http headers used for SHOUTcast 2 (Ultravox 2.1) streams</li>
<li>Changed the stream admin page to also report the user agent of the connected clients<br><br></li>

<li>Fixed some more issues with password handling related to the changes in builds 17 and 18</li>
</ul>
<p><br></p>

<a name="18"></a><h3>2.0.0 Build 18 (Beta) <a style="font-size:55%;" href="#">[top]</a></h3>
<hr>
<ul class="n">
<li>Added prompt for configuration file to load if one is not specified or there is an error loading the configuration file in non-daemon / service mode<br><br></li>

<li>Fixed some admin options not working due to password related changes in the previous release e.g. prevented legacy client title updates</li>
<li>Fixed loading issues on non-Windows versions related to the handling of the banned and reserved IP files</li>
</ul>
<p><br></p>

<a name="17"></a><h3>2.0.0 Build 17 (Beta) <a style="font-size:55%;" href="#">[top]</a></h3>
<hr>
<ul class="n">
<li>Added per stream versions of the following configuration options (prefix with 'stream' to use them in addition to the master options e.g. streampassword): password, adminpassword, publicserver, allowrelay, allowpublicrelay, riponly, autodumpsourcetime, autodumpusers, listenertime, songhistory, uvoxcipherkey, introfile, backupfile, banfile, ripfile</li>
<li>Added 'logclients' configuration option to allow for client connections and disconnects to not be logged (default behaviour is to log these events)</li>
<li>Added summary administration page accessed via admin.cgi or admin.cgi?sid=0 instead of going to the default stream summary page (only works with 'adminpassword' access)</li>
<li>Added '&amp;iponly=1' support to 'admin.cgi?mode=viewxml' so listener stats (in standard mode or when using &amp;page=3) will only output the listener's IP address instead of all other information<br><br></li>

<li>Changed 'admin.cgi?mode=reload' to only be available via the new summary administration page instead of on each stream administration page</li>
<li>Changed the /currentsong and &lt;songtitle&gt; values to be a formatted title as 'artist - title' if the 2.x stream source metadata allows instead of just showing 'title'</li>
<li>Changed the /listen* actions to auto-fill the server IP in the generated playlist files if 'dstip / destip' is not set so the playlist is more likely to be valid</li>
<li>Changed the /home action to open the stream url in a new window / tab instead or replacing the current view of the admin pages</li>
<li>Changed the server to not load if appropriate passwords have not been specified (including per stream configurations) to improve security especially with per-stream password support</li>
<li>Changed the title produced for 1.x clients to be 'artist - title' instead of 'artist - album - title' to resolve some legacy client related issues</li>
<li>Changed some of the admin page text spacing and other misc html changes</li>
<li>Changed administration pages to not allow access to the 'tail logfile' and 'view logfile' pages when using 'streamadminpassword' to prevent information from other stream configuration groups being seen<br><br></li>

<li>Fixed the Ban and Reserve IP administration actions to not re-add an already banned or reserved IP (overlap of single vs subnets still happens)</li>
<li>Fixed stream configuration options not being applied correctly when using the plain name (without _X on the end) for streamid=1 configurations</li>
<li>Fixed /stream/sid client access not working correctly if an invalid station id (sid) was passed on the connection attempt</li>
<li>Fixed the root index.html page occassionally reporting streams as available when they are not</li>
<li>Fixed 'admin.cgi?mode=reload&amp;sid=#' not always updating or removing stream configurations correctly despite reporting it had especially with streamid=1 changes or the source password changed</li>
<li>Fixed YP2 connections not following the 'yptimeout' configuration option</li>
<li>Fixed 'admin.cgi?sid=#&amp;mode=updinfo' only updating the default stream configuration instead of the stream configuration required<br><br></li>

<li>Removed invalid link for the IRC stream entry on the administration pages<br><br></li>

<li>Updated Configuration Builder to latest version</li>
<li>Updated documentation to reflect new options and related errata</li>
</ul>
<p><br></p>

<a name="14"></a><h3>2.0.0 Build 14 (Beta) <a style="font-size:55%;" href="#">[top]</a></h3>
<hr>
<ul class="n">
<li>Improved handling of the mimetype reported by legacy mp3 sources to improve usage of 1.x sources (maps more mimetypes to audio/mpeg as applicable)<br><br></li>

<li>Added /nextsongs?sid=# to show the next coming songs in an xml form (if known) when using a compatible 2.x stream source</li>
<li>Added 'admincssfile' option to allow for using 1.x DNAS / SHOUTcast 2 / custom css styling of the index.html and the admin pages (check documentation for usage)<br><br></li>

<li>Changed 'admin.cgi?mode=reload&amp;sid=#' to also update 'password' and 'requirestreamconfigs'</li>
<li>Changed 'configrewrite=1' to not output 'include' on exit<br><br></li>

<li>Fixed Windows version logfile path generation if none or an invalid configuration file is passed (relates to change of default logfile path to %temp%\sc_serv.log in previous build)</li>
<li>Fixed Windows service not running and being identified as sc_trans in the system event logs<br><br></li>

<li>Updated some of the example configurations to resolve issues with platform specific path handling</li>
<li>Updated Configuration Builder to latest version</li>
</ul>
<p><br></p>

<a name="13"></a><h3>2.0.0 Build 13 (Beta) <a style="font-size:55%;" href="#">[top]</a></h3>
<hr>
<ul class="n">
<li>Added 'streammaxuser' to the stream configuration group options to allow for a per stream limit with 'maxuser' still ensuring a maximum client limit on the server</li>
<li>Added support for wildcards via the 'include' feature e.g. 'include=stream/*.conf' to allow for a specific file for each stream configuration on the server</li>
<li>Added a new 'admin.cgi?mode=reload&amp;sid=#' mode to the administration support which will make the server reload its stream configurations by adding / removing / updating any streams on the fly where it can (unless '&amp;force=1' is also passed) otherwise it will kick sources and clients as applicable</li>
<li>Added YP connection status on the 'Server Status' message on index.html and the admin page to make it easier to see if a YP connection on a public server exists</li>
<li>Added more information to the log generated to indicate if a YP connection has worked or not without having to enable debugging in the configuration file or completely cryptic messages</li>
<li>Added &amp;page=5 additional param handling to the admin.cgi?mode=viewxml stats action to provide the currently held metadata of the playing song (amount of information depends on the source and what metadata it provides)</li>
<li>Added &amp;page=6 additional param handling to the admin.cgi?mode=viewxml stats action to provide the currently known stream configurations (amount of information depends on the number of stream configurations specified)</li>
<li>Added Configuration Builder (see config_builder folder) as a graphical way of making working configuration files (in combination with forum user thinktink)<br><br></li>

<li>Now ships in linux 64-bit - is identified as 'posix(linux x64)' with the 32-bit version now identified as 'posix(linux x86)'<br><br></li>

<li>Changed YP2 connection failures to be reported more clearly instead of an obscure /yp/resp/updatefreq missing error or requiring 'yp2debug=1' to be enabled</li>
<li>Changed default location of the log file on Windows installs to %temp%\sc_serv.log instead of c:\sc_serv.log (resolves some issues on Windows Vista / 7 and write permissions)</li>
<li>Changed pvt_update(..) to not spam the logs when 'yp2debug=1' is enabled in the configuration file if a connection attempt to the YP2 fails</li>
<li>Changed http header checks to allow empty values from a 'key:value' pair to resolve some client connection issues</li>
<li>Changed the 'Server Status' message on the index.html and the admin pages to show 'There is no source connected or no stream is configured for stream #X' when the stream is not active or there is no source connected</li>
<li>Changed the reported configuration file on the index.html and the admin pages to be the base file loaded instead of the last included file if 'include' is used in the configuration files</li>
<li>Changed handling of 1.x sources to autofill the aim, irc and icq entries with N/A or 0 as appropriate if not set in what the source sends to the server e.g. Nicecast on Mac<br><br></li>

<li>Fixed an api dependency issue preventing this from running on Windows 2000</li>
<li>Fixed /nextsong?sid=# to show the unescaped version of the &lt;soon/&gt; metadata tag if received from the source</li>
<li>Fixed clients trying to connect via Ultravox 2.0 (e.g. Winamp 5.5x and older versions) not being able to connect or causing non-Windows versions of the server to terminate incorrectly</li>
<li>Fixed logging not working when passing certain invalid configuration files</li>
<li>Fixed admin.cgi?mode=resetxml not working - now will reset &lt;peaklisteners&gt; and &lt;streamhits&gt; fields to mimick 1.x DNAS handling<br><br></li>

<li>Disabled the &lt;webdata/&gt; block in the admin.cgi?mode=viewxml stats (as well as via the &amp;page=2 additional param) for the time being</li>
<li>Disabled some of the admin.cgi?mode=viewxml stats entries not currently being filled in just to cut down on unnecessary bandwidth usage - better use the &amp;page=# option to get specific sets of stats instead of all in one go to keep bandwidth usage down<br><br></li>

<li>Updated documentation based on user feedback and related changes, added sc_serv_simple.conf as an ultra simple configuration example, minor other issues &amp; changes made</li>
</ul>
<p><br></p>

<a name="10"></a><h3>2.0.0 Build 10 (Beta) <a style="font-size:55%;" href="#">[top]</a></h3>
<hr>
<ul class="n">
<li>Now ships in BSD 8.x and Windows 64-bit<br><br></li>

<li>Added 'next song' to the stream + admin pages</li>
<li>Added a disconnect message indicating the duration, number of bytes sent and agent of the connection being closed</li>
<li>Added a current and next song pages (/currentsong?sid=# and /nextsong?sid=#) along with &lt;NEXTSONG&gt; in the xml report for consistency</li>
<li>Added description for the Win32 service so it's clearer the service is ours<br><br></li>

<li>Accessing any admin / info pages with no stream id or the stream id is less than or equal to zero will show a summary of any available streams (if there are any)</li>
<li>Fully enabled SHOUTcast 2 (Ultravox 2.1) protocol support with server output (used with YP2=1 in config and a compatible connecting client)<br><br></li>

<li>Changed 'yp2' configuration setting default to 'on'</li>
<li>Changed config handling to close sc_serv if not set or missing / invalid<br><br></li>

<li>Fixed locale issues preventing sc_serv from loading without changing the machine's locale (non-Win32 issue)</li>
<li>Minor log message changes to sort of standardise the message style</li>
<li>Fixed segfault issue when attempting to connect to YP2 (may have been an internal thing, not sure)</li>
<li>On Windows versions 'ctrl + break' is now handled as a valid quit command instead of just having the running instance closed<br><br></li>

<li>Upgraded libraries to use expat-2.0.1</li>
</ul>
<p><br></p>

<a name="7"></a><h3>2.0.0 Build 7 (Beta) <a style="font-size:55%;" href="#">[top]</a></h3>
<hr>
<ul class="n">
<li>First public release of the 2.x DNAS</li>
</ul>
<p><br></p>